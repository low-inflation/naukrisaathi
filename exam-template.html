<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="examTitle">Exam Details - Naukri Saathi</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #faf7f0;
      line-height: 1.6;
      padding: 10px;
      color: #2a4d69;
    }
    h1, h2 {
      color: #2a4d69;
    }
    section {
      background: #fff;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    a {
      color: #1a73e8;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .cta-button {
      display: inline-block;
      padding: 8px 12px;
      background: #4CAF50;
      color: #fff;
      border-radius: 5px;
      text-decoration: none;
      margin-top: 10px;
    }
    .cta-button:hover {
      background: #45a049;
    }
    ul {
      padding-left: 1.2rem;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 500px;
      margin: 10px 0;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
    }
    th {
      background-color: #f0f0f0;
      text-align: left;
    }
    /* Responsive iframe container */
    .video-container {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 */
      padding-top: 25px;
      height: 0;
      margin-bottom: 20px;
    }
    .video-container iframe {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
  </style>
</head>
<body>

  <div id="google_translate_element" style="text-align: right; margin-bottom: 10px;"></div>

  <a href="class10.html" class="cta-button">â† Back to Class 10 Jobs</a>

  <h1 id="exam-title">Loading...</h1>
  <p id="exam-subtitle"></p>

  <section>
    <h2>ğŸ” About</h2>
    <div id="exam-about"></div>
  </section>

  <section>
    <h2>â“ Why this exam?</h2>
    <div id="exam-why"></div>
  </section>

  <section>
    <h2>ğŸ“ Who can apply?</h2>
    <div id="exam-eligibility"></div>
  </section>

  <section>
    <h2>ğŸ’¼ Job roles</h2>
    <div id="exam-roles"></div>
  </section>

  <section>
    <h2>ğŸ“ Exam pattern</h2>
    <div id="exam-pattern"></div>
  </section>

  <section>
    <h2>ğŸ“… Important dates</h2>
    <div id="exam-dates"></div>
  </section>

  <section>
    <h2>ğŸ’¡ Tips</h2>
    <div id="exam-tips"></div>
  </section>

  <section>
    <h2>ğŸ”— Resources</h2>
    <p>ğŸ“„ <a id="pdf-link" href="#" target="_blank" rel="noopener noreferrer">Notification / Syllabus</a></p>
    <p>ğŸ“„ <a id="pyq-link" href="#" target="_blank" rel="noopener noreferrer">Previous Year Papers</a></p>
    <div id="youtube-links"></div>
  </section>

  <section>
    <h2>ğŸŒ Official site</h2>
    <p><a id="official-site" href="#" target="_blank" rel="noopener noreferrer">Visit Official Website</a></p>
  </section>

  <section>
    <h2>ğŸ“ How to apply</h2>
    <p><a id="apply-link" href="#" class="cta-button" target="_blank" rel="noopener noreferrer">Apply Online</a></p>
  </section>

  <footer>
    <p style="text-align:center; margin-top: 20px;">Â© 2025 Naukri Saathi | All resources are free & official</p>
  </footer>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRVh2Dak5NekD_LAZjqbR4QRqkBmqrY0Jxm3E8Svle-6yhjebjbSWJGVZ1AAKIKuJVKL09XnoZxUlFj/pub?output=tsv";

    function getExamIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get("id") || "";
    }

    function formatList(str) {
      if (!str) return "";
      const items = str.split("|").map(s => s.trim()).filter(Boolean);
      if (items.length === 0) return "";
      return "<ul>" + items.map(i => `<li>${i}</li>`).join("") + "</ul>";
    }

    function formatDates(str) {
      if (!str) return "";
      const parts = str.split("|").map(s => s.trim());
      if (parts.length % 2 !== 0) return str.replace(/\|/g, "<br>"); // fallback

      let rows = "";
      for (let i = 0; i < parts.length; i += 2) {
        rows += `<tr><td>${parts[i]}</td><td>${parts[i+1]}</td></tr>`;
      }
      return `<table>
                <thead><tr><th>Event</th><th>Date</th></tr></thead>
                <tbody>${rows}</tbody>
              </table>`;
    }

    function generateYouTubeEmbedHTML(youtubeData) {
      if (!youtubeData) return "";
      let parts = youtubeData.split("|").map(s => s.trim());
      let html = "";

      for (let i = 0; i < parts.length; i += 3) {
        let title = parts[i];
        let url = parts[i+2];
        if (title && url) {
          if (url.includes("youtube.com/watch?v=")) {
            const videoId = url.split("v=")[1].split("&")[0];
            const embedUrl = `https://www.youtube.com/embed/${videoId}`;
            html += `<div>
                      <h4>${title}</h4>
                      <div class="video-container">
                        <iframe src="${embedUrl}" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
                      </div>
                    </div>`;
          } else if (url.includes("youtube.com/playlist?list=")) {
            html += `<p><strong>${title}</strong>: <a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a></p>`;
          } else {
            html += `<p><strong>${title}</strong>: <a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a></p>`;
          }
        }
      }
      return html;
    }

    fetch(sheetUrl)
      .then(res => {
        if (!res.ok) throw new Error("Network response was not ok");
        return res.text();
      })
      .then(text => {
        let rows = text.trim().split("\n").map(r => r.split("\t"));
        let headers = rows[0];
        let exams = rows.slice(1);

        let examId = getExamIdFromUrl();
        let exam = exams.find(r => r[0] === examId);

        if (!exam) {
          document.querySelector("#exam-title").textContent = "Exam Not Found";
          return;
        }

        let data = {};
        headers.forEach((h, i) => data[h] = exam[i] || "");

        document.querySelector("#exam-title").textContent = data.title || "";
        document.querySelector("#exam-subtitle").textContent = data.subtitle || "";
        document.querySelector("#exam-why").innerHTML = data.why || "";
        document.querySelector("#exam-about").innerHTML = data.about || "";
        document.querySelector("#exam-eligibility").innerHTML = formatList(data.eligibility);
        document.querySelector("#exam-roles").innerHTML = formatList(data.roles);
        document.querySelector("#exam-pattern").innerHTML = formatList(data.pattern);
        document.querySelector("#exam-dates").innerHTML = formatDates(data.dates);
        document.querySelector("#exam-tips").innerHTML = formatList(data.tips);

        document.querySelector("#pdf-link").href = data.pdf_link || "#";
        document.querySelector("#pyq-link").href = data.pyq_link || "#";

        document.querySelector("#youtube-links").innerHTML = generateYouTubeEmbedHTML(data.youtube);

        document.querySelector("#official-site").href = data.website || "#";
        document.querySelector("#apply-link").href = data.apply_link || "#";
      })
      .catch(err => {
        console.error("Error loading exam data:", err);
        document.querySelector("#exam-title").textContent = "Failed to load exam data.";
      });
  });
</script>

<!-- Google Translate -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'as,hi',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
