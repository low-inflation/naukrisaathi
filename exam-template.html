<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="examTitle">Exam Details - Naukri Saathi</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9fafb;
      color: #222;
      line-height: 1.6;
    }
    main {
      max-width: 900px;
      margin: auto;
      padding: 1rem;
    }
    h1, h2 {
      color: #004e56;
      margin-top: 1.5rem;
    }
    .info-box, .warning-box {
      background: #e0f7fa;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 8px;
      font-size: 1rem;
    }
    .warning-box {
      background: #ffebee;
      border-left: 4px solid #d32f2f;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: .5rem;
    }
    th, td {
      border: 1px solid #ddd;
      padding: .6rem;
      text-align: left;
    }
    th {
      background: #f1f1f1;
    }
    a {
      color: #00796b;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    ul {
      padding-left: 1.2rem;
    }
    li {
      margin-bottom: .4rem;
    }
    footer {
      text-align: center;
      font-size: .9rem;
      color: #666;
      margin-top: 2rem;
      padding: 1rem;
      background: #f1f1f1;
    }
    /* Mobile friendly */
    @media (max-width: 600px) {
      body {
        font-size: 1rem;
      }
      h1 {
        font-size: 1.4rem;
      }
      h2 {
        font-size: 1.2rem;
      }
    }
    .button-apply {
  display: inline-block;
  background: #4CAF50;
  color: #fff;
  padding: 0.8rem 1.6rem;
  border-radius: 999px;
  font-size: 1.1rem;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  transition: background 0.3s ease, transform 0.2s ease;
}
.button-apply:hover {
  background: #3e8e41;
  transform: translateY(-2px);
}
.button-apply:active {
  transform: translateY(0);
}

  </style>
</head>
<body>
<header>
  <h1 id="exam-title">Loading...</h1>
  <p>Your Friend in the Journey to a Government Job</p>
</header>

  <main>
    <div class="info-box" id="why-box"></div>

    <h2>🔍 About the Exam</h2>
    <ul id="about-list"></ul>

    <h2>🎓 Who Can Apply?</h2>
    <ul id="eligibility-list"></ul>

    <h2>💼 Job Roles</h2>
    <ul id="roles-list"></ul>

    <h2>📝 Exam Pattern</h2>
    <ul id="pattern-list"></ul>

    <h2>📅 Important Dates</h2>
    <table id="dates-table">
      <thead><tr><th>Event</th><th>Date</th></tr></thead>
      <tbody></tbody>
    </table>

    <h2>💡 Tips</h2>
    <ul id="tips-list"></ul>

    <div class="warning-box" id="warning-box" style="display:none;"></div>

    <h2>🔗 Resources</h2>
    <ul>
      <li><a id="pdf-link" href="#" target="_blank">📄 Notification / Syllabus</a></li>
      <li><a id="pyq-link" href="#" target="_blank">📄 Previous Year Papers</a></li>
    </ul>

    <h2>📺 YouTube Study Links</h2>
    <ul id="youtube-list"></ul>

    <h2>🌐 Official Website</h2>
    <p><a id="official-site" href="#" target="_blank">Visit Official Website</a></p>

    <h2>📝 How to Apply</h2>
    <a id="apply-link" class="button-apply" href="#" target="_blank">Apply Online</a>

    <div id="rural-tip-box" style="display:none; margin-top:20px; padding:15px; border-radius:10px; background:#fff8e1; border:1px solid #ffd54f; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
  <strong style="color:#ff6f00;">🌱 Rural Tip:</strong> <span id="rural-tip-text"></span>
</div>

  </main>

  <footer>
    © 2025 Naukri Saathi | SBI YFI Fellowship Project | All resources are free & official
  </footer>

 <script>
  const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRCaqsjus7r9xvHab6eqJOwjWXw6DSqm1K6_x3E-eDCtqac_Vb7K0V0cRYQC1My5g52yj5uCZZCZQmU/pub?output=tsv";

  function getExamIdFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get("exam_id") || "";   // ✅ match jobs-template
  }

  function splitList(text) {
    if (!text) return [];
    return text.split("|").map(item => item.trim()).filter(item => item);
  }

  document.addEventListener("DOMContentLoaded", () => {
    const examId = getExamIdFromUrl();

    fetch(sheetUrl)
      .then(res => res.text())
      .then(text => {
        const rows = text.trim().split("\n").map(r => r.split("\t"));
        const headers = rows[0].map(h => h.trim().toLowerCase());
        const dataRows = rows.slice(1);

        const examRow = dataRows.find(r => {
          const rowType = (r[0] || "").trim().toLowerCase();
          const rowExamId = (r[3] || "").trim();
          return rowType === "detail" && rowExamId === examId;
        });

        if (!examRow) {
          document.getElementById("headerTitle").textContent = "Exam Not Found";
          return;
        }

        const examData = {};
        headers.forEach((h, i) => examData[h] = (examRow[i] || "").trim());

        document.getElementById("headerTitle").textContent = examData.title || "No Title";
        document.getElementById("pageTitle").textContent = examData.title || "Exam Details";

        // TODO: here paste your section-filling logic (about, eligibility, etc.)
        // (I can expand this if you want, but main bug is now fixed.)
      })
      .catch(err => console.error("Error loading exam:", err));
  });
</script>

</body>
</html>
